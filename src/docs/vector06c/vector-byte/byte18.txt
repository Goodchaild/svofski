			" Б А Й Т - 1 8 "

		           Киров, 1993
                  информационно-рекламный выпуск
			  центра "БАЙТ"
                 для пользователей ПК "Вектор-06Ц"

 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 +  Наш адрес: г. Киров, Октябрьский пр-т, 118, м-н "Дом Радио" + 
 +   Адрес для писем" 610006, г.Киров, а/я 1248, Зубкову А.Н.   +
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++



                РЕСТАРТ MDOS ЧЕРЕЗ СБР+БЛК
                --------------------------

 Многие пользователи MDOS (независимо от версии MDOS1 или MDOS2,
т.к. в данном случае это безразлично) страдают от того, что их
ОС не перезапускается при нажатии СБР+БЛК. Это возникает из-за
несоответствия между MDOS и схемой квази-диска (в дальнейшем КД).
]ри одновременном нажатии на клавиши БЛК и СБР сигнал СБРОС с
системной шины АС41 (по схеме компьютера) выключает КД, т.к.
сбрасывает в 0 D7,D8,D10 (по схеме КД). Поэтому при рестарте не-
обходимо включить КД перед тем, как сделать переход по стартовому
адресу (ячейки 0001 и 0002), иначе переход будет произведен не в
память КД, а в экранное ОЗУ, что приводит к "зависанию" компьютера.
Поэтому по адресу 0000 надо вместо кода 0C3H записывать код 0F7H
(RST 6), что при рестарте приведет к переходу по адресу 0030H и
включению КД.
 В MDOS вектора переходов устанавливаются следующим фрагментом.

       для MDOS2:         для MDOS1:

    D365 MVI A,C3      DB65 MVI A,C3
    D367 ]TA 0000      DB67 STA 0000
    D36A LXI H,B903    DB6A LXI H,C103
    D36D SHLD 0001     DB6D SHLD 0001
    D370 STA 0005      DB70 STA 0005
    D373 LXI H,B900    DB73 LXI H,C100
    D376 SHLD 0006     DB76 SHLD 0006

 Но для нас это безразлично, т.к. МDOS самонастраивающаяся система
и мы будем менять не настроенный код, который идентичен для обеих
версий MDOS. Вот его текст при загрузке в SID с адреса 100H (для
этого наберите командную строку A>SID OS.COM<ВК>):

    1E65 MVI A,C3
    1E67 STA 0000
    1E6A LXI H,0203
    1E6D SHLD 0001
    1E70 STA 0005
    1E73 LXI H,0200
    1E76 SHLD 0006

 Заменим его на следующий код:

    1E65 MVI A,C3
    1E67 STA 0005
    1E6A LXI H,0203
    1E6D SHLD 0001
    1E70 LXI H,0200
    1E73 SHLD 0006
    1E76 MOV H,L    ;L=0  из предыстории
    1E77 MVI M,F7   ;HL=0

Т. к. перестраиваемый байт с адреса 1E75H передвинулся на адрес
1E72H, проводим соответствующие изменения в массиве настройки, а
очнее меняем 04 по адресу 266EH на 20H.
 Кому мое обьяснение покажется не ясным может просто сменить зна-
чения ячеек памяти через директиву S SIDа в соответствии с табли-
цей:

   Адрес ячейки  Старое значение      Новое значение

      1E68              00                  05
      1E70              32                  21
      1E71              05                  00
      1E72              00                  02
      1E73              21                  22
      1E74              00                  06
      1E75              02                  00
      1E76              22                  65
      1E77              06                  36
      1E78              00                  F7
      266E              04                  20

                                         Виктор Саттаров, Киров-1992


	Обзор программ-упаковщиков для БПЭВМ "Вектор-06ц".
-----------------------------------------------------------------
			Аннотация.
 Уважаемые  господа  пользователи,   вашему  вниманию предлагается
статья, в которой я попытался вкратце, но доступным языком описать
все имеющиеся на данный момент у меня "упаковщики", "прессы", "ар-
хивы" и аналогичные программы, уменьшающие об'ем программ,а так же
оценить особенности и эффективнось работы каждой  из  них. Заранее
приношу извинения за не совсем полный приводимый  список программ,
т.к.  не  все авторы соглашаютя предоставлять свои произведения на 
всеобщее народное обсуждение и  использование, а  некоторые версии
еще не пришли ко мне (например, COMDEC или DeltCompressor).
 Уважаемые господа программисты,авторы упаковщиков! Ваши программы
приобретут большую известность, если описания  их будут включены в
один из таких обзорных выпусков. Такая реклама не будет вам ничего
стоить, но расширит круг пользователей  ваших  программ и принесет
вам известность в кругах "векторных" программистов не только Санкт-
Петербурга, но и других городов страны. Вы  можете  высылать  свои
разработки и предложения по адресу :
189630 г.Санкт-Петербург - Колпино-5  ул.Тверская 50-23  Мершиеву Ф.А.
	Мой телефон (812) 463-38-27.
По Вашему желанию, Ваши авторские произведения будут (или не будут)
тиражироваться на взаимовыгодных условиях.
				*  *  *
 При  исследованиях  в  качестве "подопытного кролика" была исполь-
зована программа "Тест устройств" (базовое программное обеспечение).
Ее начальный об'ем - 64 блока (здесь и далее размеры файлов указаны
только в HEX-виде).
				*  *  *

АРХИВ 1:2                     Луппов Г.Б.                Киров 1992

 Впервые этот упаковщик был представлен  центром  "Байт" в  составе
авторского выпуска(A-1) программ Г.Б.Луппова в прошлом году. Он вы-
полнен в виде копира со стандартной картой загрузки, определяет имя
загружаемого файла (здесь и далее имеются в виду файлы в формате ROM),
хотя копировщиком совсем не является. По окончании загрузки опреде-
ляет, не был ли данный файл им уже сжат. Eсли да, то происходит ав-
томатическая  распаковка, в противном случае-автоматическая упаков-
ка, при этом архиватор выводит об'ем программы до и после обработки.
 Для  знатоков можно добавить, что алгоритм упаковщика построен  на
методе оптимального статистического кодирования Хаффмана.
 Сжатый модуль грузится в память со 0100h.
 Эксперимент показал следующее: "Тесты устройств" были сжаты с 64 до
5B  блоков. На упаковку было затрачено 30сек., на распаковку при за-
пуске  сжатого  модуля  - 2мин.10сек. Медлительность распаковщика -
главный недостаток этой программы.
 Внимание! В версии "Архив 1:3" учтен этот недостаток. Скорость рас-
паковки увеличилась в 13 раз (с 2 мин 10 сек до 9 сек)!

Pack-1                        Желнов П.А.             Отрадный 1992

 Выполнен в виде сервисного копировщика. Aвтоматически упаковывает
загруженный файл (если тот не был сжат ранее тем же упаковщиком) ,
выдавая начальный и конечный об'ем программы.После упаковки сжатый
модуль будет загружаться в память с адреса 0000h (что не всегда же-
лательно), так что, если Вы хотите без проблем запускать  затем та-
кую программу из ДОС, используйте  программу  R0.COM  (Желнов П.А.)
или PS.COM (Калашников Б.О.). Подробное описание Pack-1 Вы найдете
в файле PACK1.DOC, написанном самим автором упаковщика.
 Затраты времени на упаковку (здесь и далее речь идет о "Тестах ус-
тройств")- 8сек., на распаковку при запуске - 2сек. Сжатый модуль -
5C блоков.
 Чуть позже автором была написана обратная программа-распаковщик  -
UnPack-1 , она работает как копировщик  (описание  в  PACK1.DOC), и
лишь при нажатии [F1] производит распаковку модуля.


Unpack                      Авдеюк Н.В.        Волгоград 27.09.1992

 Представляет из себя исходный ассемблерный текст простых упаковщи-
ка и распаковщика, расчитанных на работу в МОНИТОРе. Имеет большие
ограничения сжимаемого модуля, т.к. производит упаковку без "нало-
жения" и нужно самому смотреть, где отвести область памяти для упа-
ковываемого(распаковываемого) массива, да так, чтоб они не  наложи-
лись друг на дружку, да МОНИТОР не затерли... 
 Данная прогграмма носит скорее обучающий, нежели прикладной харак-
тер и может оказаться полезной для начинающего программиста.


 Упаковщики фирмы SeS, написанные в Петербурге за 1992 год :

 Все упаковщики  этой  фирмы  расчитаны на работу в МОНИТОРе. После
упаковки сжатый модуль загружается в память с адреса  0000h. Описа-
ние каждого из них имеется в программe SeS-Text-2. Теперь  отдельно
о каждом из них :

			Compressor-1
 Сжал подопытный файл до 5D блоков, на упаковку затратил 6 сек., на
распаковку при запуске сжатого модуля - 4 сек.

                    Quick-Compressor v(1)
 В отличии от предыдущего, позволяет сжимать программы, работающие
как с адреса 0100h, так и с 0000h (по выбору).
 Сжал тоже до 5D блоков, но на упаковку затратил 16сек., а на рас-
паковку - около секунды.

		    Quick-Compressor v(2)
 Позволяет устанавливать рабочую область декомпрессора, адрес стар-
та и гасить при распаковке экран (по желанию пользователя). По  эф-
фективности компрессии полностью аналогичен первой версии.


    	           Версии программы PRESS :
    ( Первоначально разработана О.О.Бобковым, Санкт-Петербург )
Описание начинаю с версии 2.1, т.к. предыдущие версии не являлись
полноценными. Сжатию подлежат лишь файлы, работающие с адреса 0100h !


Press v(2.1)               Бобков O.O.                  Апрель 1992

 Работает в МОНИТОРе. Процесс упаковки отображается в динамике, в
виде двух растущих столбиков (старый и новый об'ем) и  побайтного
отображения сжимаемого участка (как при загрузке в начальный заг-
рузчик "Вектора"). Это прибавляет программе привлекательности,тем
более, что упаковка происходит отнюдь не мнгновенно, как в других
упаковщиках. Время сжатия нашего "теста"-1мин. 13сек., однако те-
перь упакованный модуль занимает 4C блоков (!). Распаковщик разво-
рачивает программу за 1.5сек.
 Пользователям, использующим в работе эту или другие версии PRESSа,
необходимо помнить о том, что по окончании упаковки область памяти
от конца сжатого модуля до начала PRESSа очищается (в данной  вер-
сии- до 83FFh), так  что  лучше не размещать в этой области другие
служебные программы.


Press v(3.0)              Бобков О.О.                 Октябрь 1992

 Существует в двух вариантах: для работы в МОНИТОРе и для работы
в дисковом отладчике типа XSID. Для обоих вариантов размер сжима-
емого файла не должен превышать 33.5Кб, а работоспособность  сжа-
того модуля размером более 29Kб не гарантируется. В связи с этим
не рекомендую сжимать файлы, уже сжатые (это не касается перечис-
ленных выше упаковщиков,кроме PRESS; их сжатые модули тоже эффек-
тивно сжимаются "сверху" еще раз. Не стоит лишь забывать,  что с
каждой упаковкой "сверху" общее время распаковки  увеличивается)
другими упаковщиками или закодированные (подобно кодировке в иг-
рах Г.Б.Луппова).
 Упаковал "тест" до 48 блоков за 3мин.33сек. Распаковка - 1.8сек.


Press v(3.1)        Бобков O.O. и Перлин В.A.          Ноябрь 1992

 Это первая (или одна из первых-другие мне пока не известны) ДИС-
КОВАЯ версия упаковщика ROM-COM-файлов для "Вектора" (именно так,
ибо чисто дисковые, машинно не ориентированные CP/M-овские упаков-
щики появились значительно раньше на других компьютерах. Примером
таких программ можно назвать упаковщик, входящий в состав оболоч-
ки NSWEEP; о нем будет сказано ниже).
 Работать способна на "Векторе" в системах любой конфигурации,  в
любых версиях BIOS. По окончании упаковки записывает сжатый модуль
со старым именем на текущий диск,а исходному файлу присваивает рас-
ширение BAK. Эффективность упаковки равноценна версии 3.0.

Press v(3.2)        Бобков О.O.                Ноябрь-декабрь 1992

 Несколько изменен  алгоритм  архивации, за счет чего уменьшилось
время упаковки ("тест" был сжат до 48 блоков за 2 минуты 30сек.).
Появилась возможность прерывать процесс упаковки (УС/C). Если файл
уже был сжат ранее этим упаковщиком, то об этом будет выдано соот-
ветствующее сообщение. Эффективность сжатия та же, что и в 3.1, но
скорость распаковки увеличена (в нашем случае-1.4 сек.).

 Скоро ждите следующие версии : для ДОС и для МЛ (в виде копировщи-
ка).
				*   *   *


LZ77.COM	    Луппов Г.Б.			Январь 1993

 Алгоритм упаковки аналогичен "Press v(3.1)". Эффективность сжа-
тия та же. Обрабатывает файлы любого размера. Создает самораспа-
ковывающиеся файлы. Адаптирует их с 100H адреса. Позволяет гибко
выбирать параметры сжатия, что позволяет найти оптимальный вари-
ант. Программа Fatax была сжата с 32 кбт до 16.

  Говоря обо всех версиях, вместе взятых, стоит отметить,что ре-
зультатом работы упаковщика является  упакованный  модуль, а  не
программа. Как правило, в начале каждого такого модуля находится
распаковщик; его размер колеблется в пределах FFh, за исключением
"АРХИВА 1:2"(его распаковщик занимает около четырех блоков) и "Un-
pack"(в его модулях нет распаковщика).
 Проблему распаковки модуля без его запуска иногда легко решить,
используя собственный распаковщик модуля. Сравнительно просто мож-
но развернуть в МОНИТОРе, а тем более-в ДОС программу, упакованную
в одном из PRESSов, правильно распределив память и вовремя перехва-
тив передачу управления от распаковщика программе. Это  не сложно,
попробуйте.


				*   *   *

        Об упаковщиках, работающих только в МикроДОС (CP/M).

 На сегодняшний день мне известен только один такой архиватор, он
входит в состав сервисной оболочки для работы с файлами NSWEEP. От-
личен своей повышенной эффективностью при сжатии текстовых файлов. 

NSWEEP v2.05       Daiv Rand         Edmonton, Alberta  04.11.1984

 Нажав при работе в NSWEEP клавишу [Q], Вы можете упаковать или рас-
паковать файл (файлы), отмеченный командой [T]. Распаковка не должна
производиться на текущий диск в текущий USER, поэтому система попро-
сит ввести диск и USER(по умолчанию 0), куда произвести распаковку.
 Если Вам не известно, запакован отмеченный файл  или  нет, нажмите
после [Q] клавишу  [R](Reverse), будет выявлено, запакован ли файл,
и произведено обратное действие (распаковка либо упаковка).
 Подробное опиисание на английском и краткое - на русском языке име-
ется. 


NSWEEP v1.2        Daiv Rand         Edmonton, Alberta 11.10.1985

 Эта версия тоже снабжена своим упаковщиком, который, однако не хо-
чет работать в BIOS 3.1. В отличии от v2.05, здесь все на немецком
языке.
 			*   *   *

 Уважаемые господа программисты! Не ленитесь, снабжайте свои архи-
ваторы дезархиваторами и подробными описаниями! Лучше лишний часик
посидеть, чем заставить рядовых хаккеров лишний раз разбираться  в
ваших произведениях. 
		       Успехов вам !
			*   *   *
 	  		              Федор Мершиев
        		    08.02.1993 * Санкт-Петербург * Колпино




		Печать экрана 512*256.
	
;*****************************************************************************
;Эта подпрограмма позволяет получать твердую копию экрана при работе в режиме*
;512х256 тип печатающего устройства - EPSON (СМ 6337). Драйвер предназначен  *
;для ОС МикроДОС, но после минимальных переделок будет работать и в других   *
;системах.								     *
; (c) Усков И.М.	Волгоград		1992-1993г		     *
;*****************************************************************************
;
		PUBLIC	PSCR
;
PSCR:
		DI
		LXI	H,0
		DAD	SP
		SHLD	STK
		LXI	SP,STACK
		XRA	A
		OUT	10H
		;
		MVI	C,1BH
		CALL	0F80FH	;по этому адресу расположена п/п вывода байта
				;на принтер. Она очень простая - убедитесь сами
		MVI	C,'3'
		CALL	0F80FH
		MVI	C,24
		CALL	0F80FH
		;
		LXI	H,GRBUF
		SHLD	PBUF
		MVI	A,32
		STA	LINE
		MVI	H,0C0H
		LDA	0FFABH	;здесь в МикроДОСе хранится значение засылаемое
		MOV	L,A	;в регистр скроллинга, т.е номер байта, с кото-
				;рого контроллер дисплея сканирует экран.
PS1:
		PUSH	H
		;
		LXI	D,WORK
		MVI	C,8
		CALL	MOVER
		MOV	A,H
		SUI	20H
		MOV	H,A
		MOV	A,L
		MVI	C,8
		ADD	C
		MOV	L,A
		CALL	MOVER
		;
		LHLD	PBUF
		MVI	C,8
B16:
		LXI	D,WORK
		CALL	CARR
		INX	H
		CALL	CARR
		INX	H
		DCR	C
		JNZ	B16
		SHLD	PBUF
		;
		POP	H
		INR	H
		MVI	A,0E0H
		CMP	H
		JNZ	PS1
		;
		PUSH	H
		MVI	C,1BH
		CALL	0F80FH
		MVI	C,'*'
		CALL	0F80FH
		LDA	REG
		MOV	C,A
		CALL	0F80FH
		MVI	C,0
		CALL	0F80FH
		MVI	C,2
		CALL	0F80FH
		;
		LXI	H,GRBUF
		SHLD	PBUF
		LXI	D,512
PRINT:
		MOV	A,M
INV:
		XRI	000H	;если нужны белые символы на черном фоне,
				;замените 000 на 0FF.
		MOV	C,A
		CALL	0F80FH
		INX	H
		DCX	D
		MOV	A,D
		ORA	E
		JNZ	PRINT
		MVI	C,0DH
		CALL	0F80FH
		MVI	C,0AH
		CALL	0F80FH
		;
		POP	H
		MVI	H,0C0H
		MOV	A,L
		SUI	8
		MOV	L,A
		LDA	LINE
		DCR	A
		STA	LINE
		JNZ	PS1
		;
		MVI	A,23H
		OUT	10H
		LHLD	STK
		SPHL
		EI
		RET
		;
CARR:
		MVI	B,8
CARR1:
		LDAX	D
		RAL
		STAX	D
		MOV	A,M
		RAL	
		MOV	M,A
		INX	D
		DCR	B
		JNZ	CARR1
		RET
;
MOVER:
		MOV	A,M
		STAX	D
		INX	D
		DCR	L
		DCR	C
		JNZ	MOVER
		RET
		;
PBUF:		DW	0000
STK:		DW	0000
LINE:		DB	32
WORK:		DS	16
REG:		DB	6	;это номер графического режима
GRBUF:		DS	512
STACK		EQU	GRBUF+530
		END

  